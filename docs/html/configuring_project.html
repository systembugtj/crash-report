<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CrashRpt: Configuring Your Project&#39;s Build Settings</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>

<table border="0" bgcolor="#FFFFFF" cellspacing="5">
 <tr>
  <td rowspan="2"><img src="../logo.png" alt="Logo" /></td>
  <td><font family="Arial" size="+2">crashrpt</font></td>
 </tr>
 <tr>
  <td><i>A crash reporting system for Windows applications</i></td>
 </tr>


</table>


</body>
<!-- Generated by Doxygen 1.5.9 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Contents</span></a></li>
      <li><a href="modules.html"><span>API&nbsp;Reference</span></a></li>
      <li><a href="files.html"><span>File&nbsp;Reference</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">CrashRpt Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="using_crashrpt.html">Using CrashRpt in Your Project</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="configuring_project">Configuring Your Project's Build Settings </a></h1><h2><a class="anchor" name="link">
Include and Lib Directories</a></h2>
At this point you should have the CrashRpt source code compiled as described in <a class="el" href="compiling_crashrpt.html">Compiling CrashRpt</a>.<p>
To let your Visual C++ compiler and linker know about the location of CrashRpt include and lib files, do the following.<p>
In Visual Studio window, open Tools-&gt; Options-&gt;Projects and Solutions-&gt;VC++ Directories.<ul>
<li>In the 'Show directories for' combo box, select 'Include files', then add the path to <em>[CRASHRPT_HOME]\include</em> directory to the list.</li><li>In the 'Show directories for' combo box, select 'Library files', then add the path to <em>[CRASHRPT_HOME]\lib</em> directory to the list.</li></ul>
<p>
Here <em>[CRASHRPT_HOME]</em> should be replaced with the actual path of the directory you unzipped CrashRpt distribution to.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>In previous versions, include files were stored in <em>[CRASHRPT_HOME]\CrashRpt\include</em>. <b>Since v1.2.0</b>, all include files are stored in <em>[CRASHRPT_HOME]\include</em> directory.</dd></dl>
Before you start using CrashRpt API functions in your program, do not forget to include <code><a class="el" href="_crash_rpt_8h.html" title="Defines the interface for the CrashRpt.DLL.">CrashRpt.h</a></code> header file in the beginning of your code:<p>
<div class="fragment"><pre class="fragment"><span class="comment">// Include CrashRpt header</span>
<span class="preprocessor">#include "<a class="code" href="_crash_rpt_8h.html" title="Defines the interface for the CrashRpt.DLL.">CrashRpt.h</a>"</span>
</pre></div><p>
You also need to add CrashRpt LIB file to the list of input libraries for your project. In the Solution Explorer window, right-click your project and choose Properties item in the context menu. Then open Configuration Properties-&gt;Linker-&gt;Input-&gt;Additional Dependencies and then add <b>CrashRpt.lib</b> to the list of libraries.<h2><a class="anchor" name="crtdll">
Using CRT as Multi-Threaded DLL (/MD) in Release Configuration</a></h2>
It is important that you configure your project to use C runtime libraries (CRT) as Multi-threaded DLL (/MD) for Release configuration. This is the way recommended in MSDN. See the <a class="el" href="exception_handling.html#crt_version_and_dll">Exception Handling and CRT Linkage</a> for more information.<p>
In the Solution Explorer window, right-click your project and open project Properties. Then choose Configuration Properties-&gt;C/C++-&gt;Code Generation. In the <b>Runtime Library</b> field, choose <b>Multi-threaded DLL (/MD)</b>. See the figure below for example.<p>
This should be done for all projects in your solution to share single CRT DLL.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd></dd></dl>
In Debug configuration it is not important what CRT linkage you use. Typically your default debugger intercepts exceptions instead of CrashRpt in Debug configuration.<p>
<div align="center">
<img src="crtdll.png" alt="crtdll.png">
<p><strong>Multi-threaded DLL (/MD)</strong></p></div>
<h2><a class="anchor" name="crtver">
Using the Same Version of CRT for All Application Modules</a></h2>
Ensure that all modules that exist in your application use the same version of CRT. If some dependent modules were compiled using an older version of CRT, you should recompile them to ensure the single version or CRT DLL is used.<p>
For example, assume you use Visual Studio 2005 and CRT 8.0 linked as DLL, but some dependent module in your application was compiled in Visual Studio .NET 2003 and uses CRT 7.1 linked as DLL. In such situation a CRT error in the dependent module won't be intercepted by CrashRpt, because error handlers are installed by you program for CRT 8.0 only.<h2><a class="anchor" name="prgdb">
Enabling Program Database (/Zi, /DEBUG) in Release Configuration</a></h2>
To get the most out of the crash minidump, the debugger needs your application's debug symbols. By default Release builds don't generate debug symbols.<p>
<ol type=1>
<li>In the Solution Explorer window, right-click your project and open project Properties. Then choose Configuration Properties-&gt;C/C++-&gt;General. In the <b>Debug Information Format</b> field, choose <b>Program Database (/Zi)</b>.</li><li>Choose Configuration Properties-&gt;Linker-&gt;Debugging. In the <b>Generate Debug Info</b> field, choose <b>Yes (/DEBUG)</b>.</li></ol>
<p>
Steps 1 and 2 should be done for all projects in your solution that support program database (EXE, DLL).<p>
The steps 1 and 2 are presented on the figures below.<p>
<div align="center">
<img src="program_database.png" alt="program_database.png">
<p><strong>Program Database (/Zi)</strong></p></div>
 <div align="center">
<img src="linker_debug_settings.png" alt="linker_debug_settings.png">
<p><strong>Enabling Debugging Information in Linker</strong></p></div>
 <b>Does using crashrpt makes it easier for somebody to reverse engineer my code?</b><p>
Actually not. To use CrashRpt you enable program database generation in Release configuration (/Zi compiler flag and /DEBUG linker flag) and this generates .PDB file for your project. PDB file contains information that can be used to reverse engineer your code, however you typically store it locally and do not distribute with your software release package. So, using crashrpt doesn't affect the difficulty of reverse engineering your code.<p>
<b>Should I use rebase.exe to set preferred load address for modules of my application to be able read minidumps later?</b><p>
This is not necessary, because a minidump file itself contains the list of loaded modules of your application and their actual load addresses. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Feb 15 19:41:00 2011 for CrashRpt by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
