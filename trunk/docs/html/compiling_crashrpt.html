<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CrashRpt: Compiling CrashRpt</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>

<table border="0" bgcolor="#FFFFFF" cellspacing="5">
 <tr>
  <td rowspan="2"><img src="../logo.png" alt="Logo" /></td>
  <td><font family="Arial" size="+2">crashrpt</font></td>
 </tr>
 <tr>
  <td><i>A crash reporting system for Windows applications</i></td>
 </tr>


</table>


</body>
<!-- Generated by Doxygen 1.5.9 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Contents</span></a></li>
      <li><a href="modules.html"><span>API&nbsp;Reference</span></a></li>
      <li><a href="files.html"><span>File&nbsp;Reference</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">CrashRpt Documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="using_crashrpt.html">Using CrashRpt in Your Project</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="compiling_crashrpt">Compiling CrashRpt </a></h1>By default, CrashRpt archive's <b>bin</b> directory contains binary files compiled in Visual Studio 2005. These files are provided for demonstration purposes only. It is strongly recommended that you compile CrashRpt yourself using your version of Visual Studio. This is needed to ensure CrashRpt uses the same version of C run-time libraries (CRT) as your application does.<h2><a class="anchor" name="building_solution">
Building Solution</a></h2>
You can compile CrashRpt in <b>Visual C++ 2003</b> and later versions, and in <b>Visual C++ Express</b>.<p>
Open one of solution files available in the top level directory of CrashRpt archive, depending on your version of Visual Studio:<ul>
<li><b>CrashRpt_vs2003.sln</b> if you use Visual C++ 2003</li><li><b>CrashRpt_vs2005.sln</b> if you use Visual C++ 2005, Visual C++ 2005 Express, Visual C++ 2008 or Visual C++ 2008 Express. Visual Studio will convert project files to the right format.</li><li><b>CrashRpt_vs2010.sln</b> if you use Visual C++ 2010 or Visual C++ 2010 Express.</li></ul>
<p>
There are several projects in CrashRpt solution.<p>
<ul>
<li><b>CrashRpt</b> project contains API implementation and provides functionality for intercepting exceptions.</li></ul>
<p>
<ul>
<li><b>CrashSender</b> project contains functionality for displaying GUI, sending the error report and showing error report sending progress.</li></ul>
<p>
<ul>
<li><b>CrashRptTest</b> is a GUI application that helps to test that CrashRpt API functions work as expected.</li></ul>
<p>
<ul>
<li><b>crashcon</b> is a console application that helps to test how CrashRpt works with console applications.</li></ul>
<p>
<ul>
<li><b>zlib</b> project contains file compression functionality.</li></ul>
<p>
<ul>
<li><b>libpng</b> project contains PNG file management functionality.</li></ul>
<p>
<ul>
<li><b>jpeg</b> project contains JPEG file management functionality.</li></ul>
<p>
<ul>
<li><b>minizip</b> project contains ZIP file management functionality.</li></ul>
<p>
<ul>
<li><b>CrashRptProbe</b> project contains functionality for processing error reports.</li></ul>
<p>
<ul>
<li><b>crprober</b> is a console tool for error reports processing.</li></ul>
<p>
<ul>
<li><b>Tests</b> project contains automated tests.</li></ul>
<p>
To build the solution, choose the <b>Release</b> build configuration and press F7 to start building process.<h2><a class="anchor" name="compiling_x64_platform">
Compilation for 64-bit (x64) Platform</a></h2>
<b>Since v.1.2.1</b>, CrashRpt can be compiled for both 32-bit (Win32) and 64-bit (x64) platforms. Visual C++ 2005 or later is required to compile for x64 plaform. You can choose the current platform by opening menu Build-&gt;Configuration Manager... and by selecting the desired platform in the 'Active solution platform:' combo box.<p>
Note, that you should have x64 compiler tools and SDK files properly installed (ensure you have checked these components during Visual C++ installation).<h2><a class="anchor" name="notes_about_evc">
Notes About Compiling in Visual C++ Express</a></h2>
Compilation in free Visual C++ Express is a little more complicated than compilation in a commercial edition of Visual C++.<p>
CrashRpt depends on WTL. WTL itself depends on Microsoft's library called ATL (Active Template Library). ATL library is a part of Visual Studio SDKs. An older version, ATL 3.0, is included into Microsoft Platform SDK for Windows Server 2003. Since then, Platform SDK was renamed into Windows SDK. However, Microsoft doesn't include ATL into Windows SDK to encourage using of commercial Visual Studio having ATL.<p>
So, there are two ways to compile CrashRpt in Visual C++ Express:<p>
<b>The first way.</b> You need to have Platform SDK for Windows Server 2003, because this Platform SDK contains ATL 3.0 source code. Download and install Microsoft Platform SDK for Windows Server 2003, for example <a href="http://www.microsoft.com/downloads/details.aspx?FamilyId=A55B6B43-E24F-4EA3-A93E-40C0EC4F68E5&displaylang=en">from here</a>.<p>
In VC++ Express window, open Tools-&gt;Options...-&gt;Projects and Solutions-&gt; VC++ Directories. In the 'Show directories for' combo, select 'Include files' and then add <em>&lt;Platform_SDK_Folder&gt;\Include\atl</em> path to the list of include directories (replace the &lt;Platform_SDK_Folder&gt; with the actual directory name).<p>
<b>The second way.</b> Install <a href="http://www.microsoft.com/whdc/devtools/wdk/wdkpkg.mspx">Windows Driver Kit</a>, version 7.0 or later, because it contains ATL 7.1 source code. When WinDDK is installed, in VC++ Express window, open Tools-&gt;Options...-&gt;Projects and Solutions-&gt; VC++ Directories. In the 'Show directories for' combo, select 'Include files' and then add <em>C:\WinDDK\6001.18002\inc\crt\atl71</em> path to the list of include directories.<h2><a class="anchor" name="builddox">
Generating Project Documentation</a></h2>
By default, project documentation is already generated and included into the CrashRpt release package. To open the documentation, click <code>index.html</code> file in the top-level directory of CrashRpt distribution.<p>
You can also build documentation yourself. CrashRpt documentation can be generated using the Doxygen tool. You can download the tool from <a href="http://www.stack.nl/~dimitri/doxygen/">here</a>.<p>
To build the documentation, go to the <code>docs</code> folder and type in the command line:<p>
<div class="fragment"><pre class="fragment">doxygen Doxyfile
</pre></div><p>
When doxygen finishes, go to the top level directory and open <code>index.html</code>.<p>
<b>What is the Release LIB build configuration?</b><p>
The Release LIB configuration is an addition to the standard Debug and Release build configurations. Typically, you do not compile CrashRpt in this configuration. However, it may be useful if you use static CRT linkage.<p>
In the Release LIB configuration, the build generates CrashSender.exe executable file and CrashRptLIB.lib static library. In this configuration, CrashSender.exe and CrashRptLIB.lib use static linkage to CRT. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Feb 15 19:41:00 2011 for CrashRpt by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
